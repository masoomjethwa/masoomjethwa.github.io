<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ion-Neutral Models Dashboard</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117; /* Darker, almost black for a sleek, modern feel */
            color: #e2e8f0; /* Off-white for main text */
            line-height: 1.8; /* Slightly increased line-height for better readability */
            overflow-x: hidden; /* Prevent horizontal scroll on small screens */
        }
        .dashboard-container {
            max-width: 1300px; /* Slightly wider container */
            margin: 0 auto;
            padding: 2.5rem; /* Increased padding */
        }
        h1, h2, h3, h4 {
            color: #f8fafc; /* Pure white for headings */
            font-weight: 800; /* Extra bold for headings */
            letter-spacing: -0.025em; /* Tighter letter spacing for modern look */
        }
        h1 { font-size: 3.5rem; } /* Larger main title */
        h2 { font-size: 2.5rem; }
        h3 { font-size: 1.85rem; }
        h4 { font-size: 1.45rem; }
        .card {
            background-color: #1a202c; /* Darker card background */
            border-radius: 1.25rem; /* Even more pronounced rounded corners */
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 10px 15px rgba(0, 0, 0, 0.2); /* Deeper, softer shadow */
            padding: 2.5rem; /* Increased padding */
            margin-bottom: 2rem; /* Increased margin */
            transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Smoother, more complex transition */
            border: 1px solid rgba(49, 60, 80, 0.5); /* Subtle, slightly transparent border */
            position: relative; /* For potential future absolute positioning of elements */
            overflow: hidden; /* Ensure content respects border-radius */
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(139, 92, 246, 0.03) 100%); /* Subtle gradient overlay */
            border-radius: 1.25rem;
            opacity: 0;
            transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 0;
        }
        .card:hover::before {
            opacity: 1;
        }
        .card:hover {
            transform: translateY(-12px); /* More pronounced lift on hover */
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5), 0 15px 25px rgba(0, 0, 0, 0.3);
        }
        .section-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0; /* Increased padding */
            margin-bottom: 0.5rem; /* Add some space below header */
        }
        .section-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.7s ease-out; /* Slower transition for content */
        }
        .section-content.expanded {
            max-height: 3000px; /* Even larger arbitrary value */
            transition: max-height 0.9s ease-in; /* Slower transition for expansion */
        }
        .arrow {
            transition: transform 0.4s ease-in-out;
            color: #8b5cf6; /* Violet for arrows */
            font-size: 2.2rem; /* Larger arrow icon */
        }
        .arrow.rotated {
            transform: rotate(90deg);
        }
        table {
            width: 100%;
            border-collapse: separate; /* Use separate for rounded corners on cells */
            border-spacing: 0; /* Remove default spacing */
            margin-top: 2rem; /* Increased margin */
            background-color: #2d3748; /* Darker background for tables */
            border-radius: 0.75rem; /* Rounded corners for the table itself */
            overflow: hidden; /* Ensures rounded corners apply to table content */
        }
        th, td {
            border: none; /* Remove individual cell borders */
            padding: 1.25rem; /* Increased padding */
            text-align: left;
            color: #e2e8f0;
            border-bottom: 1px solid rgba(71, 85, 105, 0.6); /* Subtle bottom border for rows */
        }
        th {
            background-color: #3f4e64; /* Slightly lighter header background */
            font-weight: 700; /* Bolder header text */
            color: #f8fafc;
            text-transform: uppercase; /* Uppercase headers */
            font-size: 0.9rem;
            letter-spacing: 0.05em;
        }
        tr:last-child td {
            border-bottom: none; /* No border on the last row */
        }
        .btn-primary {
            background: linear-gradient(45deg, #3b82f6, #6366f1); /* Gradient button */
            color: white;
            padding: 1rem 2rem; /* Larger padding */
            border-radius: 0.75rem;
            transition: all 0.3s ease-in-out;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            letter-spacing: 0.025em;
            border: none;
            cursor: pointer;
        }
        .btn-primary:hover {
            background: linear-gradient(45deg, #2563eb, #4f46e5); /* Darker gradient on hover */
            transform: translateY(-3px); /* More pronounced lift */
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
        }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-left-color: #ffffff;
            border-radius: 50%;
            width: 32px; /* Even larger spinner */
            height: 32px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 1rem;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .icon {
            font-size: 2rem; /* Larger icon size */
            margin-right: 1rem;
            color: #a78bfa; /* Lighter violet for icons */
        }
        .equation {
            background-color: #2d3748; /* Darker background for equations */
            padding: 1.25rem; /* Increased padding */
            border-radius: 0.75rem; /* More rounded corners */
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            font-family: 'Times New Roman', serif;
            overflow-x: auto;
            color: #e0f2fe;
            border: 1px solid rgba(71, 85, 105, 0.5); /* Subtle border for equations */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2); /* Inner shadow */
        }
        .input-field {
            background-color: #2d3748; /* Darker input background */
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #475569;
            transition: border-color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .input-field:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3); /* Focus ring */
        }
        .placeholder-gray-400::placeholder {
            color: #94a3b8; /* Lighter placeholder text */
        }
        .generated-image {
            border: 2px solid #6366f1; /* Stronger, colored border for images */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); /* Soft shadow for images */
        }
        .footer-text {
            color: #64748b; /* Lighter gray for footer */
            font-size: 0.9rem;
            letter-spacing: 0.025em;
        }
    </style>
</head>
<body class="antialiased">
    <div class="dashboard-container">
        <header class="text-center mb-16 p-10 bg-gradient-to-br from-blue-900 to-indigo-950 text-white rounded-2xl shadow-3xl relative overflow-hidden">
            <h1 class="text-6xl md:text-7xl font-extrabold mb-4 tracking-tight leading-tight">Ion-Neutral Models in Planetary Atmospheres</h1>
            <p class="text-2xl text-blue-300 font-light mb-2">Unveiling the Dynamics of Coupled Plasma and Neutral Gases</p>
            <p class="text-xl text-blue-400 font-medium">Insights from the Interplanetary Aeronomy Laboratory (IAL)</p>
            <p class="text-lg text-blue-500 mt-2">Authored by Dr. A. Nyx ‚Äì Planetary Atmospheric Physics Group | July 2, 2025</p>
            <!-- Background subtle animation elements -->
            <div class="absolute top-0 left-0 w-full h-full pointer-events-none opacity-20">
                <div class="absolute w-40 h-40 bg-blue-500 rounded-full blur-3xl opacity-50 -top-10 -left-10 animate-pulse"></div>
                <div class="absolute w-60 h-60 bg-indigo-500 rounded-full blur-3xl opacity-50 -bottom-20 -right-20 animate-pulse delay-500"></div>
            </div>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

            <!-- Introduction Card -->
            <div id="introduction" class="card lg:col-span-3">
                <h2 class="text-3xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üåå</span> Introduction: The Coupled Cosmos</h2>
                <p class="mb-5 text-gray-300 text-lg">Planetary atmospheres are dynamic mixtures of neutral species (atoms, molecules) and charged particles (ions, electrons). The intricate dance between these components‚Äîknown as **ion-neutral coupling**‚Äîis fundamental to understanding:</p>
                <ul class="list-disc list-inside ml-6 text-gray-300 text-lg space-y-2">
                    <li>Atmospheric escape mechanisms.</li>
                    <li>Energy deposition from the relentless solar wind.</li>
                    <li>Mesmerizing auroral processes.</li>
                    <li>The complex dynamics of planetary ionospheres.</li>
                </ul>
                <p class="mt-5 text-gray-300 text-lg">Ion-neutral models are sophisticated mathematical frameworks designed to simulate this coupled behavior, providing critical insights into the ionospheres of Earth, Mars, Venus, Titan, and even distant exoplanets.</p>
            </div>

            <!-- Physical Foundations Card -->
            <div id="physical-foundations" class="card">
                <div class="section-header" onclick="toggleSection('physical-foundations-content', 'physical-foundations-arrow')">
                    <h2 class="text-2xl font-semibold text-blue-400 flex items-center"><span class="icon">‚öõÔ∏è</span> Physical Foundations</h2>
                    <span id="physical-foundations-arrow" class="arrow text-3xl">&#9654;</span>
                </div>
                <div id="physical-foundations-content" class="section-content">
                    <h3 class="text-xl font-medium mt-5 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üî¨</span> Key Atmospheric Components</h3>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li><strong>Neutrals:</strong> Major atmospheric gases (e.g., $\text{N}_2$, $\text{CO}_2$, $\text{O}$, $\text{H}_2$).</li>
                        <li><strong>Ions:</strong> Produced by photoionization, impact ionization, charge exchange.</li>
                        <li><strong>Electrons:</strong> Free electrons influencing conductivity and plasma oscillations.</li>
                    </ul>

                    <h3 class="text-xl font-medium mt-6 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üåç</span> Relevant Atmospheric Regions</h3>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li><strong>Thermosphere:</strong> Upper region, solar EUV heating & photochemistry dominant.</li>
                        <li><strong>Ionosphere:</strong> Significant ionization ($\sim80-500 \text{ km}$ on Earth, higher on Mars/Venus).</li>
                        <li><strong>Magnetosphere/Ionopause:</strong> Interaction zone with solar wind.</li>
                    </ul>
                </div>
            </div>

            <!-- Theoretical Framework Card -->
            <div id="theoretical-framework" class="card">
                <div class="section-header" onclick="toggleSection('theoretical-framework-content', 'theoretical-framework-arrow')">
                    <h2 class="text-2xl font-semibold text-blue-400 flex items-center"><span class="icon">üìê</span> Theoretical Framework: Coupling</h2>
                    <span id="theoretical-framework-arrow" class="arrow text-3xl">&#9654;</span>
                </div>
                <div id="theoretical-framework-content" class="section-content">
                    <h3 class="text-xl font-medium mt-5 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üßÆ</span> Momentum Equation (Multi-fluid)</h3>
                    <p class="text-gray-300 text-base mb-3">Each species satisfies a fluid momentum equation:</p>
                    <div class="equation">
                        $$m_s n_s \left( \frac{d\vec{v}_s}{dt} \right) = -\nabla p_s + n_s q_s (\vec{E} + \vec{v}_s \times \vec{B}) - m_s n_s \nu_{sn} (\vec{v}_s - \vec{v}_n)$$
                    </div>
                    <p class="text-gray-300 text-base mb-4">Where:</p>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li>$s = \text{species (ion or electron)}$</li>
                        <li>$\vec{v}_s = \text{velocity of species}$</li>
                        <li>$\nu_{sn} = \text{collision frequency with neutrals}$</li>
                        <li>$\vec{E}, \vec{B} = \text{electric and magnetic fields}$</li>
                    </ul>

                    <h3 class="text-xl font-medium mt-6 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">‚ûï</span> General Ionization Equation</h3>
                    <div class="equation">
                        $$\frac{\partial n_i}{\partial t} + \nabla \cdot (n_i \vec{v}_i) = P_i - L_i$$
                    </div>
                    <p class="text-gray-300 text-base mb-4">Where:</p>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li>$P_i = \text{ion production (photoionization, etc.)}$</li>
                        <li>$L_i = \text{ion loss (recombination, charge exchange)}$</li>
                    </ul>
                </div>
            </div>

            <!-- Coupling Processes Card -->
            <div id="coupling-processes" class="card">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üîó</span> Key Coupling Processes</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-base">
                        <thead>
                            <tr>
                                <th class="py-3 px-5">Process</th>
                                <th class="py-3 px-5">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-3 px-5">Photoionization</td>
                                <td class="py-3 px-5">Solar EUV photons ionize neutrals (e.g., $\text{CO}_2 + \text{h}\nu \rightarrow \text{CO}_2^+ + \text{e}^-$).</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Electron Impact</td>
                                <td class="py-3 px-5">Suprathermal electrons ionize neutrals, esp. during auroral events.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Ion-Neutral Collisions</td>
                                <td class="py-3 px-5">Momentum and energy exchange; drives conductivity & wave damping.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Charge Exchange</td>
                                <td class="py-3 px-5">Ion interacts with neutral atom, transferring charge (e.g., $\text{O}^+ + \text{H} \rightarrow \text{O} + \text{H}^+$).</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Ion Drag</td>
                                <td class="py-3 px-5">Ions moving through neutrals exert drag, important in thermospheric dynamics.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Modeling Approach Card -->
            <div id="modeling-approach" class="card">
                <div class="section-header" onclick="toggleSection('modeling-approach-content', 'modeling-approach-arrow')">
                    <h2 class="text-2xl font-semibold text-blue-400 flex items-center"><span class="icon">üìä</span> Modeling Approaches</h2>
                    <span id="modeling-approach-arrow" class="arrow text-3xl">&#9654;</span>
                </div>
                <div id="modeling-approach-content" class="section-content">
                    <h3 class="text-xl font-medium mt-5 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üìà</span> Model Types</h3>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li><strong>Single-fluid (MHD):</strong> Assumes charge-neutral coupling; less accurate in weakly ionized plasmas.</li>
                        <li><strong>Multi-fluid:</strong> Separate equations for ions, electrons, and neutrals. Captures ionospheric physics better.</li>
                        <li><strong>Hybrid Models:</strong> Particle-in-cell (ions) + fluid (electrons); used in magnetosphere-ionosphere studies.</li>
                        <li><strong>Kinetic Models:</strong> Resolve velocity distribution functions, critical for escape & non-Maxwellian behavior.</li>
                    </ul>

                    <h3 class="text-xl font-medium mt-6 mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üß©</span> Coupled Models</h3>
                    <p class="text-gray-300 text-base mb-3">Modern simulations integrate:</p>
                    <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                        <li>Photochemical models (ion creation/loss).</li>
                        <li>Neutral atmosphere models (e.g., GCMs).</li>
                        <li>MHD or hybrid plasma solvers (solar wind interaction).</li>
                    </ul>
                    <p class="text-gray-300 text-base mt-3">Examples: Mars Global Ionosphere-Thermosphere Model (M-GITM), BATS-R-US, TRANSCAR.</p>
                </div>
            </div>

            <!-- Planetary Case Studies Card (full width) -->
            <div id="planetary-case-studies" class="card lg:col-span-3">
                <h2 class="text-3xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">ü™ê</span> Planetary Case Studies</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-5">
                    <div class="bg-gray-800 p-7 rounded-xl shadow-inner border border-gray-700 hover:border-blue-600 transition-all duration-300">
                        <h3 class="text-xl font-medium mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üî¥</span> Mars</h3>
                        <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                            <li>Dominant ions: $\text{O}_2^+$, $\text{CO}_2^+$, $\text{O}^+$.</li>
                            <li>Weak intrinsic magnetic field $\rightarrow$ solar wind directly compresses ionosphere.</li>
                            <li>Ion-neutral coupling drives ion escape via: Pick-up ions, Ionospheric outflow, Polar plume formation.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-7 rounded-xl shadow-inner border border-gray-700 hover:border-blue-600 transition-all duration-300">
                        <h3 class="text-xl font-medium mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üü†</span> Venus</h3>
                        <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                            <li>Similar ionosphere to Mars, but more massive $\text{CO}_2$ atmosphere.</li>
                            <li>Dayside ionosphere highly structured; nightside diffuse.</li>
                            <li>Ion-neutral friction major role in thermospheric superrotation.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-7 rounded-xl shadow-inner border border-gray-700 hover:border-blue-600 transition-all duration-300">
                        <h3 class="text-xl font-medium mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üü£</span> Titan (Saturn‚Äôs Moon)</h3>
                        <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                            <li>Dominated by complex hydrocarbon ions ($\text{CH}_4^+$, $\text{C}_2\text{H}_5^+$).</li>
                            <li>Strong ion-neutral interactions in dense upper atmosphere.</li>
                            <li>Coupled with magnetospheric plasma from Saturn.</li>
                        </ul>
                    </div>
                    <div class="bg-gray-800 p-7 rounded-xl shadow-inner border border-gray-700 hover:border-blue-600 transition-all duration-300">
                        <h3 class="text-xl font-medium mb-3 text-indigo-300 flex items-center"><span class="icon text-xl">üîµ</span> Earth</h3>
                        <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-1">
                            <li>Strong magnetic field $\rightarrow$ ionospheric layers (E, F1, F2).</li>
                            <li>$\text{E} \times \text{B}$ drifts, field-aligned currents, ion drag influence upper atmospheric circulation.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Observational Constraints Card -->
            <div id="observational-constraints" class="card">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üõ∞Ô∏è</span> Observational Constraints</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-base">
                        <thead>
                            <tr>
                                <th class="py-3 px-5">Mission / Instrument</th>
                                <th class="py-3 px-5">Contribution</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-3 px-5">MAVEN (Mars)</td>
                                <td class="py-3 px-5">Detailed ion/neutral profiling, ion escape rates.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Venus Express</td>
                                <td class="py-3 px-5">VIRTIS, ASPERA-4 for ionospheric/thermospheric structure.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Cassini (Titan)</td>
                                <td class="py-3 px-5">INMS and RPWS analyzed ion-neutral chemistry.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">GOLD / ICON (Earth)</td>
                                <td class="py-3 px-5">Thermosphere-ionosphere imaging & spectroscopy.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Applications Card -->
            <div id="applications" class="card">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üí°</span> Applications of Models</h2>
                <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-2">
                    <li>Atmospheric escape estimation (non-thermal loss via ion pickup).</li>
                    <li>Space weather modeling for robotic and human missions.</li>
                    <li>Auroral dynamics on magnetized bodies.</li>
                    <li>Radio wave propagation and signal attenuation modeling.</li>
                    <li>Exoplanet habitability via ion escape & magnetic shielding analysis.</li>
                </ul>
            </div>

            <!-- Challenges and Future Directions Card -->
            <div id="challenges-future" class="card lg:col-span-2">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üöß</span> Challenges & Future Directions</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full text-base">
                        <thead>
                            <tr>
                                <th class="py-3 px-5">Challenge</th>
                                <th class="py-3 px-5">Strategy</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-3 px-5">Accurate ion-neutral collision rates</td>
                                <td class="py-3 px-5">Lab measurements + quantum chemistry calculations.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Coupling scales (micro to macro)</td>
                                <td class="py-3 px-5">Multi-scale modeling: kinetic + fluid.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Data scarcity for non-Earth planets</td>
                                <td class="py-3 px-5">Long-duration missions and cubesat networks.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">3D and time-dependent effects</td>
                                <td class="py-3 px-5">Fully coupled 3D GCMs with variable solar inputs.</td>
                            </tr>
                            <tr>
                                <td class="py-3 px-5">Exoplanet analogs</td>
                                <td class="py-3 px-5">Use solar system templates + scaling laws.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Conclusion Card -->
            <div id="conclusion" class="card">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">‚úÖ</span> Conclusion</h2>
                <p class="mb-4 text-gray-300 text-base">Ion-neutral models are indispensable tools for studying upper atmospheres across the solar system. They help understand energy transfer, escape processes, and the plasma environment of planetary bodies.</p>
                <p class="text-gray-300 text-base">As high-resolution datasets from missions continue, refining and validating these models will be central to advancing planetary aeronomy and exoplanetary science.</p>
            </div>

            <!-- References Card (full width) -->
            <div id="references" class="card lg:col-span-3">
                <h2 class="text-2xl font-semibold mb-6 flex items-center text-blue-400"><span class="icon">üìö</span> References</h2>
                <ul class="list-disc list-inside ml-6 text-gray-300 text-base space-y-2">
                    <li>Fox, J. L. (2015). Ion-neutral chemistry in planetary upper atmospheres. Annual Review of Astronomy and Astrophysics, 53, 491‚Äì518.</li>
                    <li>Bougher, S. W. et al. (2015). Early MAVEN deep dip campaigns: Thermal structure and neutral dynamics. Geophysical Research Letters, 42(21), 8958‚Äì8966.</li>
                    <li>Brecht, S. H., & Ledvina, S. A. (2012). The role of the Martian crustal magnetic field in controlling ionospheric loss. Icarus, 226(1), 469‚Äì476.</li>
                    <li>Luhmann, J. G. et al. (2008). Venus upper atmosphere and plasma environment. Space Sci Rev., 139, 35‚Äì74.</li>
                </ul>
            </div>

            <!-- Image Generator Section (Full width) -->
            <div id="image-generator" class="card lg:col-span-3 bg-blue-950 border-l-4 border-blue-600">
                <h2 class="text-3xl font-semibold mb-6 text-blue-300 flex items-center"><span class="icon" style="color: #6366f1;">üñºÔ∏è</span> Visualize Ion-Neutral Phenomena</h2>
                <p class="mb-5 text-blue-200 text-lg">Enter a description to generate a stunning image related to ion-neutral interactions or planetary atmospheres. Let's bring the cosmos to life!</p>
                <div class="flex flex-col md:flex-row gap-6 mb-8">
                    <input type="text" id="image-prompt" placeholder="e.g., Earth's aurora from space, Martian ionosphere interacting with solar wind" class="flex-grow p-4 bg-gray-800 text-white input-field placeholder-gray-400">
                    <button id="generate-image-btn" class="btn-primary">
                        Generate Image
                        <span id="loading-spinner" class="loading-spinner hidden"></span>
                    </button>
                </div>
                <div id="image-output" class="mt-8 text-center">
                    <img id="generated-image" src="" alt="Generated Planetary Image" class="max-w-full h-auto rounded-lg generated-image mx-auto" style="display: none;">
                    <p id="image-error" class="text-red-400 mt-4 hidden text-base"></p>
                </div>
            </div>
        </main>

        <footer class="text-center mt-16 pt-10 border-t border-gray-700 text-gray-500 text-sm footer-text">
            &copy; 2025 Interplanetary Aeronomy Laboratory (IAL). All rights reserved.
        </footer>
    </div>

    <script>
        // Function to toggle section visibility
        function toggleSection(contentId, arrowId) {
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);

            if (content.classList.contains('expanded')) {
                content.classList.remove('expanded');
                arrow.classList.remove('rotated');
            } else {
                content.classList.add('expanded');
                arrow.classList.add('rotated');
            }
        }

        // Image Generation Logic
        const generateImageBtn = document.getElementById('generate-image-btn');
        const imagePromptInput = document.getElementById('image-prompt');
        const generatedImage = document.getElementById('generated-image');
        const loadingSpinner = document.getElementById('loading-spinner');
        const imageError = document.getElementById('image-error');

        generateImageBtn.addEventListener('click', async () => {
            const prompt = imagePromptInput.value.trim();
            if (!prompt) {
                imageError.textContent = 'Please enter a description for the image.';
                imageError.classList.remove('hidden');
                generatedImage.style.display = 'none';
                return;
            }

            // Show loading spinner and hide previous image/error
            loadingSpinner.classList.remove('hidden');
            generateImageBtn.disabled = true;
            generatedImage.style.display = 'none';
            imageError.classList.add('hidden');

            try {
                const payload = {
                    instances: { prompt: prompt },
                    parameters: { "sampleCount": 1 }
                };
                const apiKey = ""; // Canvas will provide this at runtime
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/imagen-3.0-generate-002:predict?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`API error: ${errorData.error.message || response.statusText}`);
                }

                const result = await response.json();

                if (result.predictions && result.predictions.length > 0 && result.predictions[0].bytesBase64Encoded) {
                    const imageUrl = `data:image/png;base64,${result.predictions[0].bytesBase64Encoded}`;
                    generatedImage.src = imageUrl;
                    generatedImage.style.display = 'block';
                    imageError.classList.add('hidden');
                } else {
                    throw new Error('No image data received from the API.');
                }
            } catch (error) {
                console.error('Error generating image:', error);
                imageError.textContent = `Failed to generate image: ${error.message}. Please try again.`;
                generatedImage.style.display = 'none';
                imageError.classList.remove('hidden');
            } finally {
                loadingSpinner.classList.add('hidden');
                generateImageBtn.disabled = false;
            }
        });

        // Initialize collapsible sections to be collapsed by default
        document.addEventListener('DOMContentLoaded', () => {
            // No need to explicitly call toggleSection here, as max-height: 0
            // and display: none are the default states.
            // If you wanted some sections open by default, you'd add 'expanded' class to them.
        });
    </script>
</body>
</html>
