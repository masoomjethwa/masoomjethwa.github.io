<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planetary Transit: A STEM Infographic</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Three.js CDN for 3D graphics -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        /* Custom CSS for the infographic theme */
        :root {
            --color-bg-dark: #0a0a2a; /* Deep space dark blue */
            --color-text-light: #e0e7ff; /* Off-white for readability */
            --color-accent-gold: #facc15; /* Gold for highlights */
            --color-accent-blue: #3b82f6; /* Bright blue for emphasis */
            --color-accent-green: #22c55e; /* Green for positive/growth */
            --color-accent-purple: #a855f7; /* Purple for unique elements */
            --color-accent-red: #ef4444; /* Red for warnings/emphasis */
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, var(--color-bg-dark), #1c1c4c); /* Gradient background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better content flow */
            min-height: 100vh;
            padding: 2rem;
            color: var(--color-text-light);
            overflow-x: hidden; /* Prevent horizontal scroll */
            position: relative; /* For parallax effect */
        }

        /* Subtle Parallax Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://placehold.co/0a0a2a/ffffff'); /* Placeholder starfield without text or specific dimensions */
            background-size: cover;
            background-attachment: fixed; /* Creates parallax effect */
            opacity: 0.2; /* Subtle opacity */
            z-index: -1; /* Send to back */
        }

        /* Main container styling */
        .infographic-container {
            @apply bg-gray-900 rounded-3xl shadow-2xl p-8 md:p-12 max-w-5xl w-full border border-blue-700;
            box-shadow: 0 0 30px rgba(var(--color-accent-blue), 0.3), inset 0 0 15px rgba(255, 255, 255, 0.05);
            position: relative; /* Ensure it sits above the parallax background */
            z-index: 1;
        }

        /* Responsive font sizing with clamp() */
        h1 {
            font-size: clamp(2.8rem, 9vw, 4.5rem);
            line-height: 1.1;
        }
        h2 {
            font-size: clamp(1.8rem, 6vw, 2.8rem);
        }
        h3 {
            font-size: clamp(1.4rem, 4.5vw, 2rem);
        }
        p, li, td, th {
            font-size: clamp(1rem, 3vw, 1.125rem);
        }

        /* Section Title Underline */
        .section-title {
            position: relative;
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            color: var(--color-accent-blue);
            font-weight: 700;
            opacity: 0; /* Initial state for animation */
            transform: translateY(20px); /* Initial state for animation */
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .section-title.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Table styling */
        table {
            @apply w-full border-collapse rounded-xl overflow-hidden shadow-lg;
            background-color: rgba(0, 0, 0, 0.3); /* Slightly transparent background */
            border: 1px solid rgba(var(--color-accent-blue), 0.5);
        }
        th, td {
            @apply p-4 text-left;
            border-bottom: 1px solid rgba(var(--color-accent-blue), 0.3);
        }
        th {
            @apply bg-blue-800 bg-opacity-40 text-blue-200 font-semibold uppercase tracking-wider;
        }
        td {
            @apply bg-gray-800 bg-opacity-30;
        }
        tr:last-child td {
            border-bottom: none;
        }
        tr:hover td {
            background-color: rgba(var(--color-accent-blue), 0.1);
            transition: background-color 0.3s ease;
        }

        /* Specific section backgrounds */
        .section-bg-blue {
            @apply bg-blue-900 bg-opacity-30 border-blue-700;
        }
        .section-bg-green {
            @apply bg-green-900 bg-opacity-30 border-green-700;
        }
        .section-bg-purple {
            @apply bg-purple-900 bg-opacity-30 border-purple-700;
        }
        .section-bg-indigo {
            @apply bg-indigo-900 bg-opacity-30 border-indigo-700;
        }

        /* Animation for sections */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Canvas styling */
        #solarSystemCanvas {
            display: block;
            width: 100%;
            height: 400px; /* Fixed height for the canvas */
            background-color: #000; /* Black background for space */
            border-radius: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: inset 0 0 15px rgba(255, 255, 255, 0.1), 0 0 20px rgba(var(--color-accent-blue), 0.5);
            cursor: grab; /* Indicate interactivity */
        }

        /* Button styling for toggle */
        .toggle-button {
            @apply px-6 py-3 rounded-full font-semibold text-lg transition-all duration-300 ease-in-out shadow-lg;
        }
        .toggle-button-active {
            @apply bg-blue-600 text-white hover:bg-blue-700;
        }
        .toggle-button-inactive {
            @apply bg-gray-700 text-gray-300 hover:bg-gray-600;
        }

        /* Tooltip Styles */
        .tooltip-container {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted rgba(255, 255, 255, 0.5); /* Dotted underline for tooltip */
        }
        .tooltip-text {
            visibility: hidden;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 10px;
            position: absolute;
            z-index: 10;
            bottom: 125%; /* Position above the element */
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap; /* Prevent text wrapping */
            font-size: 0.9rem;
        }
        .tooltip-container:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Modal for Quiz Feedback */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease;
        }
        .modal.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #1a1a4a;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 0 20px rgba(var(--color-accent-gold), 0.5);
            max-width: 90%;
            width: 400px;
            position: relative;
        }
        .modal-close-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--color-text-light);
            cursor: pointer;
        }

        /* Utility for print/download buttons */
        .action-button {
            @apply px-4 py-2 rounded-lg font-semibold text-sm transition-all duration-300 ease-in-out shadow-md;
            @apply bg-purple-600 text-white hover:bg-purple-700;
        }
    </style>
</head>
<body class="text-gray-100">
    <div class="infographic-container">
        <!-- Main Title -->
        <h1 class="font-extrabold text-center text-blue-400 mb-8 leading-tight">
            <span class="text-yellow-300">üåû</span> PLANETARY TRANSIT
            <div class="text-xl md:text-2xl font-medium text-gray-400 mt-2">
                Witnessing Celestial Alignments
            </div>
        </h1>

        <!-- Interactive 3D Solar System Model -->
        <div class="mb-10 animate-on-scroll">
            <h2 class="section-title">Interactive Solar System</h2>
            <canvas id="solarSystemCanvas" aria-label="Interactive 3D model of the inner solar system. Drag to rotate."></canvas>
            <div class="flex flex-wrap justify-center gap-4 mt-4">
                <button id="morningViewBtn" class="toggle-button toggle-button-active" aria-label="Set camera to morning view">Morning View</button>
                <button id="eveningViewBtn" class="toggle-button toggle-button-inactive" aria-label="Set camera to evening view">Evening View</button>
                <button id="simulateTransitBtn" class="toggle-button bg-green-600 text-white hover:bg-green-700" aria-label="Simulate a planetary transit">Simulate Transit</button>
                <!-- Removed Audio Toggle Button -->
            </div>
            <p class="text-center text-gray-400 mt-4 text-sm">Drag the canvas to rotate the view!</p>
        </div>

        <!-- Introduction Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-blue animate-on-scroll">
            <h2 class="section-title">What is a Planetary Transit?</h2>
            <p class="text-gray-300 leading-relaxed">
                A planetary transit is a rare celestial event where Mercury or Venus passes between the Earth and the Sun. During this time, the planet appears as a small black dot moving across the bright face of the Sun. This happens when the planet is in a position called <span class="font-bold text-yellow-300 tooltip-container">inferior conjunction<span class="tooltip-text">When an inferior planet is directly between the Sun and Earth.</span></span>, directly between Earth and the Sun.
            </p>
        </section>

        <!-- Why Only Mercury and Venus? Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-green animate-on-scroll">
            <h2 class="section-title">ü™ê Why Only Mercury and Venus?</h2>
            <p class="text-gray-300 leading-relaxed">
                Mercury and Venus are called <span class="font-bold text-purple-300 tooltip-container">inferior planets<span class="tooltip-text">Planets that orbit closer to the Sun than Earth.</span></span> because they orbit closer to the Sun than Earth does. Only these two planets can pass directly between us and the Sun, making transits possible.
            </p>
        </section>

        <!-- What Does a Transit Look Like? Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-purple animate-on-scroll">
            <h2 class="section-title">üìç What Does a Transit Look Like?</h2>
            <p class="text-gray-300 leading-relaxed">
                To observers on Earth, a planetary transit looks like a tiny black dot moving slowly from <span class="font-bold text-red-300">East to West</span> across the face of the Sun. This movement takes several hours and must be viewed safely using specialized equipment.
            </p>
            <div class="mt-4 p-4 bg-red-900 bg-opacity-40 rounded-lg border border-red-700 text-red-200">
                <h3 class="font-bold text-xl mb-2 flex items-center">
                    <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                    IMPORTANT SAFETY WARNING!
                </h3>
                <p>
                    **NEVER look directly at the Sun without proper eye protection.** Viewing a transit requires certified solar filters, eclipse glasses, or a safe solar projection method (like a pinhole projector). Staring at the Sun, even for a brief moment, can cause permanent eye damage.
                </p>
                <div class="flex flex-col sm:flex-row justify-around items-center mt-4 space-y-4 sm:space-y-0 sm:space-x-4">
                    <div class="text-center">
                        <svg class="w-20 h-20 mx-auto text-yellow-300" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                            <path d="M12 4a8 8 0 00-7.07 4H19.07A8 8 0 0012 4zM4 12a8 8 0 004 6.93V5.07A8 8 0 004 12zm16 0a8 8 0 00-4-6.93v13.86A8 8 0 0020 12z"/>
                            <circle cx="12" cy="12" r="4" fill="black"/> <!-- Small black dot for transit -->
                        </svg>
                        <p class="mt-2 text-sm">Pinhole Projector</p>
                    </div>
                    <div class="text-center">
                        <svg class="w-20 h-20 mx-auto text-blue-300" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M10 4H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-6l-2-2zM4 16V6h5.17l1.41 1.41L12 9h8v7H4z"/>
                            <circle cx="12" cy="12" r="3" fill="gray"/>
                            <path d="M12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm0-4c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"/>
                        </svg>
                        <p class="mt-2 text-sm">Safe Solar Glasses</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How Often Do Transits Happen? Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-blue animate-on-scroll">
            <h2 class="section-title">üìÜ How Often Do Transits Happen?</h2>
            <ul class="list-disc list-inside text-gray-300 space-y-2">
                <li><span class="font-bold text-yellow-300">Mercury:</span> Occurs about 13‚Äì14 times per century (roughly once every 7‚Äì10 years).</li>
                <li><span class="font-bold text-yellow-300">Venus:</span> Extremely rare. Transits of Venus occur in pairs, 8 years apart, then not again for over 100 years.</li>
            </ul>
            <p class="text-gray-300 mt-4 font-semibold">Recent Venus Transits:</p>
            <ul class="list-disc list-inside text-gray-300 ml-4">
                <li>1874 & 1882</li>
                <li>2004 & 2012</li>
            </ul>
            <p class="text-gray-300 mt-2 font-semibold">üî≠ Next confirmed Venus Transit: <span class="text-green-300">December 11, 2117</span></p>
            <p class="text-gray-400 text-sm mt-2 italic">For a detailed historical and future timeline, explore external astronomical resources!</p>
        </section>

        <!-- Transit vs. Eclipse Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-indigo animate-on-scroll">
            <h2 class="section-title">üîÑ Transit vs. Eclipse: What's the Difference?</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                While both involve celestial bodies blocking light, transits and eclipses are distinct phenomena:
            </p>
            <ul class="list-disc list-inside text-gray-300 space-y-2">
                <li><span class="font-bold text-yellow-300">Transit:</span> A smaller celestial body (a planet like Mercury or Venus) passes in front of a larger one (the Sun), appearing as a tiny dot. The transiting body is much smaller than the light source it crosses.</li>
                <li><span class="font-bold text-yellow-300">Eclipse:</span> A celestial body (like the Moon) completely or partially blocks the light from another (the Sun), or passes into the shadow of another (Earth). The eclipsing body is typically much larger relative to the light source or the shadow it casts.</li>
            </ul>
            <p class="text-gray-300 mt-4 italic">
                Think of it: A transit is like a fly crossing a spotlight; an eclipse is like a hand blocking a flashlight.
            </p>
        </section>

        <!-- Why Are Transits Important? Section -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-green animate-on-scroll">
            <h2 class="section-title">üîç Why Are Transits Important?</h2>
            <ul class="list-disc list-inside text-gray-300 space-y-2">
                <li><span class="font-bold text-yellow-300">Historically:</span> Transits, especially of Venus, were crucial in the 18th and 19th centuries for precisely measuring the <span class="tooltip-container">Astronomical Unit (AU)<span class="tooltip-text">The average distance between the Earth and the Sun.</span></span>, which helped determine the scale of our entire Solar System.</li>
                <li><span class="font-bold text-yellow-300">Today:</span> The "transit method" is a primary technique used by missions like NASA's Kepler and TESS to detect <span class="tooltip-container">exoplanets<span class="tooltip-text">Planets orbiting stars other than our Sun.</span></span>. When an exoplanet passes in front of its host star, it causes a tiny, temporary dip in the star's brightness, which astronomers can detect.</li>
                <li><span class="font-bold text-yellow-300">Educational Value:</span> Transits offer real-life, observable examples of planetary motion, celestial alignment, and orbital mechanics, making complex astronomical concepts tangible.</li>
            </ul>
        </section>

        <!-- STEM Concepts Integrated Table -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-purple animate-on-scroll">
            <h2 class="section-title">üß™ STEM Concepts Integrated</h2>
            <table>
                <thead>
                    <tr>
                        <th>STEM Area</th>
                        <th>Concept</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="font-semibold text-blue-200">Science</td>
                        <td>Astronomy, planetary motion, solar observation, orbits, celestial alignments</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-blue-200">Technology</td>
                        <td>Use of solar telescopes, camera filters, astronomical software</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-blue-200">Engineering</td>
                        <td>Designing safe solar viewing devices and observational instruments</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-blue-200">Mathematics</td>
                        <td>Calculating orbital paths, time intervals, angles, transit durations</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Suggested Teaching-Learning Materials (TLMs) Table -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-blue animate-on-scroll">
            <h2 class="section-title">üß∞ Suggested Teaching-Learning Materials (TLMs)</h2>
            <table>
                <thead>
                    <tr>
                        <th>TLM Type</th>
                        <th>Examples</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="font-semibold text-yellow-200">Models</td>
                        <td>3D Solar System model, orbit diagrams with string and pins</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-yellow-200">Digital Tools</td>
                        <td>Stellarium (planetarium software), NASA Eyes, simulation apps</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-yellow-200">Hands-on Activities</td>
                        <td>Shadow box to simulate transit, scale model with balls and flashlight</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-yellow-200">Visual Aids</td>
                        <td>Infographics, time-lapse videos of Mercury/Venus transits</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-yellow-200">Observation Tools</td>
                        <td>Solar filters, pinhole projectors, safe solar-viewing glasses</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Knowledge Applied Table -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-green animate-on-scroll">
            <h2 class="section-title">üß† Knowledge Applied Table</h2>
            <table>
                <thead>
                    <tr>
                        <th>Concept</th>
                        <th>Real-Life Application</th>
                    </tr>

                </thead>
                <tbody>
                    <tr>
                        <td class="font-semibold text-purple-200">Planetary Transit</td>
                        <td>Used to discover exoplanets by monitoring starlight dips</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-purple-200">Orbital Motion</td>
                        <td>Helps plan satellite launches and interplanetary missions</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-purple-200">Safe Solar Viewing</td>
                        <td>Promotes eye safety during solar events (e.g., eclipses)</td>
                    </tr>
                    <tr>
                        <td class="font-semibold text-purple-200">Time & Cycles</td>
                        <td>Understanding calendar systems and celestial event prediction</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Knowledge Check Quiz -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-purple animate-on-scroll">
            <h2 class="section-title">‚ùì Knowledge Check Quiz</h2>
            <div id="quizContainer" class="space-y-6">
                <!-- Question 1 -->
                <div class="quiz-question bg-gray-800 bg-opacity-50 p-4 rounded-lg">
                    <p class="font-semibold text-lg mb-3">1. Which planets can transit the Sun as seen from Earth?</p>
                    <div class="space-y-2">
                        <label class="block"><input type="radio" name="q1" value="a" class="mr-2">a) Mars and Jupiter</label>
                        <label class="block"><input type="radio" name="q1" value="b" class="mr-2">b) Mercury and Venus</label>
                        <label class="block"><input type="radio" name="q1" value="c" class="mr-2">c) Earth and Moon</label>
                        <label class="block"><input type="radio" name="q1" value="d" class="mr-2">d) All planets</label>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="quiz-question bg-gray-800 bg-opacity-50 p-4 rounded-lg">
                    <p class="font-semibold text-lg mb-3">2. What is the primary modern importance of planetary transits?</p>
                    <div class="space-y-2">
                        <label class="block"><input type="radio" name="q2" value="a" class="mr-2">a) Predicting weather patterns</label>
                        <label class="block"><input type="radio" name="q2" value="b" class="mr-2">b) Detecting exoplanets</label>
                        <label class="block"><input type="radio" name="q2" value="c" class="mr-2">c) Measuring Earth's rotation</label>
                        <label class="block"><input type="radio" name="q2" value="d" class="mr-2">d) Navigating spacecraft</label>
                    </div>
                </div>

                <button id="submitQuizBtn" class="toggle-button bg-blue-600 text-white hover:bg-blue-700 w-full md:w-auto" aria-label="Submit quiz answers">Submit Answers</button>
            </div>
        </section>

        <!-- Social Sharing and Print/Download -->
        <section class="mb-10 p-6 rounded-2xl border section-bg-indigo animate-on-scroll">
            <h2 class="section-title">üîó Share & Save</h2>
            <div class="flex flex-wrap justify-center gap-4">
                <button id="printBtn" class="action-button" aria-label="Print this infographic">
                    <svg class="w-5 h-5 inline-block mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6m-6-4v4m6-4v4m-5-9V3h-1V2h-4v1H7v2m5 0v3m0 0v3"></path></svg>
                    Print / Download PDF
                </button>
            </div>
        </section>

        <!-- About the Scientist Section -->
        <footer class="p-6 bg-indigo-900 bg-opacity-30 rounded-2xl border border-indigo-700 text-center shadow-inner animate-on-scroll">
            <h2 class="section-title">About the Planetary Scientist</h2>
            <p class="text-gray-300 text-base">
                This infographic was crafted by a passionate Planetary Scientist and strong advocate for STEM Teaching-Learning. My goal is to make complex astronomical phenomena accessible and exciting for learners of all ages, fostering curiosity and scientific inquiry. Through interactive content and clear explanations, I aim to inspire the next generation of scientists and explorers.
            </p>
        </footer>
    </div>

    <!-- Quiz Feedback Modal -->
    <div id="quizModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="quizModalTitle">
        <div class="modal-content">
            <button class="modal-close-button" aria-label="Close quiz feedback">√ó</button>
            <h3 id="quizModalTitle" class="text-2xl font-bold text-yellow-300 mb-4">Quiz Results</h3>
            <p id="quizModalMessage" class="text-lg text-gray-200"></p>
            <button class="toggle-button bg-blue-600 text-white hover:bg-blue-700 mt-6 modal-close-button-bottom" aria-label="Dismiss quiz results">Got It!</button>
        </div>
    </div>

    <script>
        // --- 3D Solar System Model (Three.js) ---
        let scene, camera, renderer, sun, earth, venus, mercury;
        let earthOrbit, venusOrbit, mercuryOrbit;
        let earthOrbitRadius = 70;
        let venusOrbitRadius = 50;
        let mercuryOrbitRadius = 30;

        let sunToVenusLine, sunToMercuryLine, venusToEarthLine, mercuryToEarthLine;

        let isDragging = false;
        let previousMouseX = 0, previousMouseY = 0;
        let targetRotationX = 0, targetRotationY = 0;
        let currentRotationX = 0, currentRotationY = 0;
        const rotationSpeed = 0.005;
        let animationTimeFactor = 0.0001; // Normal speed
        let originalAnimationTimeFactor = 0.0001; // Store original for reset

        // Function to initialize the 3D scene
        function initThreeJS() {
            const canvas = document.getElementById('solarSystemCanvas');
            const width = canvas.clientWidth;
            const height = canvas.clientHeight;

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000); // Black background for space

            // Camera
            camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.set(0, 50, 100); // Adjust camera position for better view
            camera.lookAt(0, 0, 0); // Look at the center of the scene

            // Renderer
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(width, height);
            renderer.setPixelRatio(window.devicePixelRatio);

            // Lighting
            const ambientLight = new THREE.AmbientLight(0x333333); // Soft ambient light
            scene.add(ambientLight);
            const pointLight = new THREE.PointLight(0xffffff, 1.5, 0); // Sun's light
            pointLight.position.set(0, 0, 0);
            scene.add(pointLight);

            // --- Celestial Bodies ---

            // Sun (large, bright sphere with emissive property for glow)
            const sunGeometry = new THREE.SphereGeometry(10, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({
                color: 0xfacc15, // Yellow
                emissive: 0xfacc15, // Emissive color for glow
                emissiveIntensity: 0.8 // Adjust glow intensity
            });
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);

            // Earth
            const earthGeometry = new THREE.SphereGeometry(2, 32, 32);
            // Custom shader material for day/night
            const earthMaterial = new THREE.ShaderMaterial({
                uniforms: {
                    lightDirection: { value: new THREE.Vector3(1, 0, 0).normalize() }, // Light from the sun
                    dayColor: { value: new THREE.Color(0x0077be) }, // Blue
                    nightColor: { value: new THREE.Color(0x0a0a2a) } // Dark blue/purple
                },
                vertexShader: `
                    uniform vec3 lightDirection;
                    varying vec3 vNormal;
                    varying vec3 vLightDirection;
                    void main() {
                        vNormal = normalize(normalMatrix * normal);
                        vLightDirection = normalize(lightDirection);
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform vec3 dayColor;
                    uniform vec3 nightColor;
                    varying vec3 vNormal;
                    varying vec3 vLightDirection;
                    void main() {
                        float intensity = dot(vNormal, vLightDirection);
                        vec3 color = mix(nightColor, dayColor, smoothstep(-0.1, 0.1, intensity));
                        gl_FragColor = vec4(color, 1.0);
                    }
                `
            });
            earth = new THREE.Mesh(earthGeometry, earthMaterial);
            scene.add(earth);

            // Venus
            const venusGeometry = new THREE.SphereGeometry(1.8, 32, 32);
            const venusMaterial = new THREE.MeshLambertMaterial({ color: 0xfca5a5 }); // Light pink/peach
            venus = new THREE.Mesh(venusGeometry, venusMaterial);
            scene.add(venus);

            // Mercury
            const mercuryGeometry = new THREE.SphereGeometry(1.5, 32, 32);
            const mercuryMaterial = new THREE.MeshLambertMaterial({ color: 0x9ca3af }); // Gray
            mercury = new THREE.Mesh(mercuryGeometry, mercuryMaterial);
            scene.add(mercury);

            // --- Orbital Paths (Circles) ---
            const orbitMaterial = new THREE.LineBasicMaterial({ color: 0x333333, transparent: true, opacity: 0.5 });

            const earthPoints = [];
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                earthPoints.push(new THREE.Vector3(Math.cos(angle) * earthOrbitRadius, 0, Math.sin(angle) * earthOrbitRadius));
            }
            earthOrbit = new THREE.LineLoop(new THREE.BufferGeometry().setFromPoints(earthPoints), orbitMaterial);
            scene.add(earthOrbit);

            const venusPoints = [];
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                venusPoints.push(new THREE.Vector3(Math.cos(angle) * venusOrbitRadius, 0, Math.sin(angle) * venusOrbitRadius));
            }
            venusOrbit = new THREE.LineLoop(new THREE.BufferGeometry().setFromPoints(venusPoints), orbitMaterial);
            scene.add(venusOrbit);

            const mercuryPoints = [];
            for (let i = 0; i <= 64; i++) {
                const angle = (i / 64) * Math.PI * 2;
                mercuryPoints.push(new THREE.Vector3(Math.cos(angle) * mercuryOrbitRadius, 0, Math.sin(angle) * mercuryOrbitRadius));
            }
            mercuryOrbit = new THREE.LineLoop(new THREE.BufferGeometry().setFromPoints(mercuryPoints), orbitMaterial);
            scene.add(mercuryOrbit);

            // --- Visual Connection Lines (Sun to Planets, Planets to Earth) ---
            const lightRayMaterial = new THREE.LineBasicMaterial({ color: 0xffa500, transparent: true, opacity: 0.7 });
            const viewLineMaterial = new THREE.LineBasicMaterial({ color: 0x00ff00, transparent: true, opacity: 0.7 });

            sunToVenusLine = new THREE.Line(new THREE.BufferGeometry(), lightRayMaterial);
            sunToMercuryLine = new THREE.Line(new THREE.BufferGeometry(), lightRayMaterial);
            venusToEarthLine = new THREE.Line(new THREE.BufferGeometry(), viewLineMaterial);
            mercuryToEarthLine = new THREE.Line(new THREE.BufferGeometry(), viewLineMaterial);

            scene.add(sunToVenusLine, sunToMercuryLine, venusToEarthLine, mercuryToEarthLine);

            // --- Mouse Controls for Camera ---
            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMouseX = e.clientX;
                previousMouseY = e.clientY;
                canvas.style.cursor = 'grabbing';
            });

            canvas.addEventListener('mouseup', () => {
                isDragging = false;
                canvas.style.cursor = 'grab';
            });

            canvas.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                const deltaX = e.clientX - previousMouseX;
                const deltaY = e.clientY - previousMouseY;

                targetRotationY += deltaX * rotationSpeed;
                targetRotationX += deltaY * rotationSpeed;

                // Clamp vertical rotation to prevent flipping
                targetRotationX = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, targetRotationX));

                previousMouseX = e.clientX;
                previousMouseY = e.clientY;
            });

            // Touch events for mobile
            canvas.addEventListener('touchstart', (e) => {
                isDragging = true;
                previousMouseX = e.touches[0].clientX;
                previousMouseY = e.touches[0].clientY;
            });

            canvas.addEventListener('touchend', () => {
                isDragging = false;
            });

            canvas.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                const deltaX = e.touches[0].clientX - previousMouseX;
                const deltaY = e.touches[0].clientY - previousMouseY;

                targetRotationY += deltaX * rotationSpeed;
                targetRotationX += deltaY * rotationSpeed;

                targetRotationX = Math.max(-Math.PI / 2, Math.min(Math.PI / 2, targetRotationX));

                previousMouseX = e.touches[0].clientX;
                previousMouseY = e.touches[0].clientY;
            });

            // Handle window resize
            window.addEventListener('resize', () => {
                const newWidth = canvas.clientWidth;
                const newHeight = canvas.clientHeight;
                camera.aspect = newWidth / newHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(newWidth, newHeight);
            });
        }

        // Animation loop
        function animate() {
            requestAnimationFrame(animate);

            // Smooth camera rotation
            currentRotationY += (targetRotationY - currentRotationY) * 0.1;
            currentRotationX += (targetRotationX - currentRotationX) * 0.1;

            camera.position.x = 100 * Math.sin(currentRotationY) * Math.cos(currentRotationX);
            camera.position.y = 100 * Math.sin(currentRotationX);
            camera.position.z = 100 * Math.cos(currentRotationY) * Math.cos(currentRotationX);
            camera.lookAt(0, 0, 0);

            // Planet orbits and rotation
            const time = Date.now() * animationTimeFactor;
            const earthSpeed = 0.8;
            const venusSpeed = 1.3;
            const mercurySpeed = 2.0;

            earth.position.x = Math.cos(time * earthSpeed) * earthOrbitRadius;
            earth.position.z = Math.sin(time * earthSpeed) * earthOrbitRadius;
            earth.rotation.y += 0.01; // Earth's self-rotation

            venus.position.x = Math.cos(time * venusSpeed + Math.PI / 2) * venusOrbitRadius;
            venus.position.z = Math.sin(time * venusSpeed + Math.PI / 2) * venusOrbitRadius;

            mercury.position.x = Math.cos(time * mercurySpeed + Math.PI) * mercuryOrbitRadius;
            mercury.position.z = Math.sin(time * mercurySpeed + Math.PI) * mercuryOrbitRadius;

            // Update light direction for Earth's day/night shader
            const lightDir = new THREE.Vector3().subVectors(sun.position, earth.position).normalize();
            earth.material.uniforms.lightDirection.value.copy(lightDir);

            // Update connection lines
            const sunPos = sun.position;
            const earthPos = earth.position;
            const venusPos = venus.position;
            const mercuryPos = mercury.position;

            sunToVenusLine.geometry.setFromPoints([sunPos, venusPos]);
            sunToMercuryLine.geometry.setFromPoints([sunPos, mercuryPos]);
            venusToEarthLine.geometry.setFromPoints([venusPos, earthPos]);
            mercuryToEarthLine.geometry.setFromPoints([mercuryPos, earthPos]);

            renderer.render(scene, camera);
        }

        // --- Morning/Evening View Toggle ---
        const morningViewBtn = document.getElementById('morningViewBtn');
        const eveningViewBtn = document.getElementById('eveningViewBtn');
        const simulateTransitBtn = document.getElementById('simulateTransitBtn');

        function setMorningView() {
            targetRotationY = -Math.PI * 0.2;
            targetRotationX = 0;
            camera.position.set(0, 50, 100);
            morningViewBtn.classList.add('toggle-button-active');
            morningViewBtn.classList.remove('toggle-button-inactive');
            eveningViewBtn.classList.remove('toggle-button-active');
            eveningViewBtn.classList.add('toggle-button-inactive');
        }

        function setEveningView() {
            targetRotationY = Math.PI * 0.2;
            targetRotationX = 0;
            camera.position.set(0, 50, 100);
            eveningViewBtn.classList.add('toggle-button-active');
            eveningViewBtn.classList.remove('toggle-button-inactive');
            morningViewBtn.classList.remove('toggle-button-active');
            morningViewBtn.classList.add('toggle-button-inactive');
        }

        morningViewBtn.addEventListener('click', setMorningView);
        eveningViewBtn.addEventListener('click', setEveningView);

        // Simulate Transit
        simulateTransitBtn.addEventListener('click', () => {
            animationTimeFactor = 0.001; // Speed up animation
            setTimeout(() => {
                animationTimeFactor = originalAnimationTimeFactor; // Revert to original speed after 5 seconds
            }, 5000);
        });

        // --- Scroll Animations (Intersection Observer) ---
        const sections = document.querySelectorAll('.animate-on-scroll');
        const sectionTitles = document.querySelectorAll('.section-title');

        const observerOptions = {
            root: null, /* viewport */
            rootMargin: '0px',
            threshold: 0.1 /* 10% of element visible */
        };

        const sectionObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            sectionObserver.observe(section);
        });

        const titleObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.5 }); // Higher threshold for titles

        sectionTitles.forEach(title => {
            titleObserver.observe(title);
        });


        // --- Knowledge Check Quiz ---
        const submitQuizBtn = document.getElementById('submitQuizBtn');
        const quizModal = document.getElementById('quizModal');
        const quizModalTitle = document.getElementById('quizModalTitle');
        const quizModalMessage = document.getElementById('quizModalMessage');
        const modalCloseButtons = document.querySelectorAll('.modal-close-button, .modal-close-button-bottom');

        submitQuizBtn.addEventListener('click', () => {
            let score = 0;
            const q1Answer = document.querySelector('input[name="q1"]:checked')?.value;
            const q2Answer = document.querySelector('input[name="q2"]:checked')?.value;

            if (q1Answer === 'b') {
                score++;
            }
            if (q2Answer === 'b') {
                score++;
            }

            let message = `You scored ${score} out of 2!`;
            if (score === 2) {
                message += " Excellent! You're a transit expert!";
                quizModalTitle.textContent = "Quiz Complete!";
                quizModalTitle.classList.remove('text-red-300');
                quizModalTitle.classList.add('text-green-300');
            } else {
                message += " Keep exploring to learn more!";
                quizModalTitle.textContent = "Quiz Results";
                quizModalTitle.classList.remove('text-green-300');
                quizModalTitle.classList.add('text-red-300');
            }
            quizModalMessage.textContent = message;
            quizModal.classList.add('show');
        });

        modalCloseButtons.forEach(button => {
            button.addEventListener('click', () => {
                quizModal.classList.remove('show');
            });
        });

        // Close modal if clicking outside content
        quizModal.addEventListener('click', (e) => {
            if (e.target === quizModal) {
                quizModal.classList.remove('show');
            }
        });

        // --- Print/Download Functionality ---
        const printBtn = document.getElementById('printBtn');
        printBtn.addEventListener('click', () => {
            window.print(); // Triggers browser's print dialog, which includes "Save as PDF"
        });

        // --- Social Sharing Buttons (Removed) ---


        // Initialize Three.js and start animation when the window loads
        window.onload = function() {
            initThreeJS();
            animate();
            setMorningView(); // Set initial view
        };
    </script>
</body>
</html>
